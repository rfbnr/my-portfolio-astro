---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import ExperimentDetailPage from "@/components/sections/ExperimentDetailPage";
import { getIcon, experimentTypeColors } from "@/lib/content";

// Generate static paths from content collection
export async function getStaticPaths() {
  const experiments = await getCollection("experiments");
  
  return experiments.map((entry) => ({
    params: { slug: entry.id },
    props: { experiment: entry },
  }));
}

const { experiment } = Astro.props;
const experimentData = {
  slug: experiment.id,
  ...experiment.data,
  // icon: getIcon(experiment.data.icon),
};
---

<Layout 
  title={`${experimentData.title} | R&D | Ridwan.dev`} 
  description={experimentData.description}
>
  <ExperimentDetailPage 
    client:visible 
    experiment={experimentData}
    typeColors={experimentTypeColors}
  />
</Layout>
